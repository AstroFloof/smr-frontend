import{S as re,i as ne,s as ae,bc as se,K as P,L as S,N as L,v as h,w,Q as M,bd as oe,e as v,a8 as A,d as H,g as b,h as D,a9 as N,j as u,f as O,Y as V,l as I,Z as _,aa as Z,aG as ve,a7 as X,aW as be,a0 as y,a3 as le,ac as ke,aF as we,$ as x,ad as C,a6 as De,P as ie,I as ue,J as fe,aL as ee,aE as Ee,bi as ce,bj as Ge,aJ as Ie,aK as je}from"../../../chunks/vendor-ec5ada1e.js";import{l as Ve}from"../../../chunks/gql-5fdd41cb.js";import{s as Ce,t as Ae}from"../../../chunks/graphql-b763070c.js";import{p as Ne}from"../../../chunks/routing-689f9c1f.js";import{a as de}from"../../../chunks/formatting-24701f16.js";import{b as te}from"../../../chunks/paths-396f020f.js";import{a as Te}from"../../../chunks/user-eeec5cd2.js";import{g as $e}from"../../../chunks/navigation-d7362a67.js";import{T as Pe}from"../../../chunks/Toast-ae7e9d4e.js";import{m as ge}from"../../../chunks/markdown-e391b8a1.js";import{M as Se}from"../../../chunks/MetaDescriptors-906e206a.js";import"../../../chunks/global-5ff8cc03.js";import"../../../chunks/singletons-d19c42e4.js";import"../../../chunks/extras-7497b851.js";import"../../../chunks/stores-bab812ef.js";function Le(s){let e,r,t,a,n,o,l,m,f=de(s[0].created_at)+"",d,i;return{c(){e=v("div"),r=v("h3"),t=A("Info"),a=H(),n=v("span"),o=v("strong"),l=A("Created:"),m=H(),d=A(f),i=v("br"),this.h()},l($){e=b($,"DIV",{class:!0});var p=D(e);r=b(p,"H3",{class:!0});var T=D(r);t=N(T,"Info"),T.forEach(u),a=O(p),n=b(p,"SPAN",{});var j=D(n);o=b(j,"STRONG",{});var F=D(o);l=N(F,"Created:"),F.forEach(u),m=O(j),d=N(j,f),j.forEach(u),i=b(p,"BR",{}),p.forEach(u),this.h()},h(){V(r,"class","text-2xl my-4 font-bold"),V(e,"class","text-lg")},m($,p){I($,e,p),_(e,r),_(r,t),_(e,a),_(e,n),_(n,o),_(o,l),_(n,m),_(n,d),_(e,i)},p($,p){p&1&&f!==(f=de($[0].created_at)+"")&&Z(d,f)},d($){$&&u(e)}}}function Me(s){let e,r;return e=new oe({props:{$$slots:{default:[Le]},$$scope:{ctx:s}}}),{c(){P(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){L(e,t,a),r=!0},p(t,a){const n={};a&3&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){M(e,t)}}}function qe(s){let e,r;return e=new se({props:{$$slots:{default:[Me]},$$scope:{ctx:s}}}),{c(){P(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){L(e,t,a),r=!0},p(t,[a]){const n={};a&3&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){M(e,t)}}}function He(s,e,r){let{guide:t}=e;return s.$$set=a=>{"guide"in a&&r(0,t=a.guide)},[t]}class Oe extends re{constructor(e){super();ne(this,e,He,qe,ae,{guide:0})}}function Fe(s){let e,r,t,a,n,o,l,m,f,d,i,$=s[0].username+"",p,T,j,F,W;return{c(){e=v("div"),r=v("h3"),t=A("Author"),a=H(),n=v("div"),o=v("div"),l=v("div"),f=H(),d=v("div"),i=v("a"),p=A($),j=H(),F=v("div"),W=A("Writer"),this.h()},l(G){e=b(G,"DIV",{class:!0});var q=D(e);r=b(q,"H3",{class:!0});var B=D(r);t=N(B,"Author"),B.forEach(u),a=O(q),n=b(q,"DIV",{class:!0});var k=D(n);o=b(k,"DIV",{class:!0});var g=D(o);l=b(g,"DIV",{class:!0,style:!0}),D(l).forEach(u),f=O(g),d=b(g,"DIV",{class:!0});var Q=D(d);i=b(Q,"A",{href:!0,class:!0});var R=D(i);p=N(R,$),R.forEach(u),j=O(Q),F=b(Q,"DIV",{});var c=D(F);W=N(c,"Writer"),c.forEach(u),Q.forEach(u),g.forEach(u),k.forEach(u),q.forEach(u),this.h()},h(){V(r,"class","text-2xl my-4 font-bold"),V(l,"class","rounded-full bg-cover w-14 h-14"),V(l,"style",m=`background-image: url("${s[0].avatar}")`),V(i,"href",T=""+(te+"/user/"+s[0].id+"/")),V(i,"class","text-yellow-500 underline"),V(d,"class","grid grid-flow-row"),V(o,"class","grid grid-flow-col auto-cols-min gap-x-4"),V(n,"class","grid auto-rows-min text-lg gap-y-4"),V(e,"class","grid grid-flow-row gap-y-2")},m(G,q){I(G,e,q),_(e,r),_(r,t),_(e,a),_(e,n),_(n,o),_(o,l),_(o,f),_(o,d),_(d,i),_(i,p),_(d,j),_(d,F),_(F,W)},p(G,q){q&1&&m!==(m=`background-image: url("${G[0].avatar}")`)&&V(l,"style",m),q&1&&$!==($=G[0].username+"")&&Z(p,$),q&1&&T!==(T=""+(te+"/user/"+G[0].id+"/"))&&V(i,"href",T)},d(G){G&&u(e)}}}function We(s){let e,r;return e=new oe({props:{$$slots:{default:[Fe]},$$scope:{ctx:s}}}),{c(){P(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){L(e,t,a),r=!0},p(t,a){const n={};a&3&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){M(e,t)}}}function Be(s){let e,r;return e=new se({props:{$$slots:{default:[We]},$$scope:{ctx:s}}}),{c(){P(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){L(e,t,a),r=!0},p(t,[a]){const n={};a&3&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){M(e,t)}}}function Je(s,e,r){let{author:t}=e;return s.$$set=a=>{"author"in a&&r(0,t=a.author)},[t]}class Ke extends re{constructor(e){super();ne(this,e,Je,Be,ae,{author:0})}}function _e(s){let e,r;return e=new Se({props:{description:s[3].data.getGuide.short_description,title:s[3].data.getGuide.name}}),{c(){P(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){L(e,t,a),r=!0},p(t,a){const n={};a&8&&(n.description=t[3].data.getGuide.short_description),a&8&&(n.title=t[3].data.getGuide.name),e.$set(n)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){M(e,t)}}}function Qe(s){let e;return{c(){e=A("404")},l(r){e=N(r,"404")},m(r,t){I(r,e,t)},p:C,i:C,o:C,d(r){r&&u(e)}}}function Re(s){let e,r,t,a=s[3].data.getGuide.name+"",n,o,l,m,f,d,i,$,p,T,j,F,W,G,q,B,k=s[5]&&me(s);d=new se({props:{class:"h-fit",$$slots:{default:[tt]},$$scope:{ctx:s}}}),p=new Oe({props:{guide:s[3].data.getGuide}}),j=new Ke({props:{author:s[3].data.getGuide.user}});let g=s[5]&&pe(s);function Q(c){s[15](c)}let R={$$slots:{default:[lt]},$$scope:{ctx:s}};return s[2]!==void 0&&(R.running=s[2]),G=new Pe({props:R}),ue.push(()=>fe(G,"running",Q)),{c(){e=v("div"),r=v("div"),t=v("h1"),n=A(a),o=H(),l=v("div"),k&&k.c(),m=H(),f=v("div"),P(d.$$.fragment),i=H(),$=v("div"),P(p.$$.fragment),T=H(),P(j.$$.fragment),F=H(),g&&g.c(),W=H(),P(G.$$.fragment),this.h()},l(c){e=b(c,"DIV",{class:!0});var E=D(e);r=b(E,"DIV",{class:!0});var K=D(r);t=b(K,"H1",{class:!0});var U=D(t);n=N(U,a),U.forEach(u),o=O(K),l=b(K,"DIV",{});var Y=D(l);k&&k.l(Y),Y.forEach(u),K.forEach(u),m=O(E),f=b(E,"DIV",{class:!0});var J=D(f);S(d.$$.fragment,J),i=O(J),$=b(J,"DIV",{class:!0});var z=D($);S(p.$$.fragment,z),T=O(z),S(j.$$.fragment,z),z.forEach(u),J.forEach(u),E.forEach(u),F=O(c),g&&g.l(c),W=O(c),S(G.$$.fragment,c),this.h()},h(){V(t,"class","text-4xl font-bold"),V(r,"class","flex flex-wrap h-auto justify-between items-center"),V($,"class","grid grid-cols-1 auto-rows-min gap-8"),V(f,"class","grid grid-auto-max auto-cols-fr gap-4"),V(e,"class","grid gap-6 xlx:grid-flow-row")},m(c,E){I(c,e,E),_(e,r),_(r,t),_(t,n),_(r,o),_(r,l),k&&k.m(l,null),_(e,m),_(e,f),L(d,f,null),_(f,i),_(f,$),L(p,$,null),_($,T),L(j,$,null),I(c,F,E),g&&g.m(c,E),I(c,W,E),L(G,c,E),B=!0},p(c,E){(!B||E&8)&&a!==(a=c[3].data.getGuide.name+"")&&Z(n,a),c[5]?k?(k.p(c,E),E&32&&h(k,1)):(k=me(c),k.c(),h(k,1),k.m(l,null)):k&&(x(),w(k,1,1,()=>{k=null}),y());const K={};E&262152&&(K.$$scope={dirty:E,ctx:c}),d.$set(K);const U={};E&8&&(U.guide=c[3].data.getGuide),p.$set(U);const Y={};E&8&&(Y.author=c[3].data.getGuide.user),j.$set(Y),c[5]?g?(g.p(c,E),E&32&&h(g,1)):(g=pe(c),g.c(),h(g,1),g.m(W.parentNode,W)):g&&(x(),w(g,1,1,()=>{g=null}),y());const J={};E&262160&&(J.$$scope={dirty:E,ctx:c}),!q&&E&4&&(q=!0,J.running=c[2],ie(()=>q=!1)),G.$set(J)},i(c){B||(h(k),h(d.$$.fragment,c),h(p.$$.fragment,c),h(j.$$.fragment,c),h(g),h(G.$$.fragment,c),B=!0)},o(c){w(k),w(d.$$.fragment,c),w(p.$$.fragment,c),w(j.$$.fragment,c),w(g),w(G.$$.fragment,c),B=!1},d(c){c&&u(e),k&&k.d(),M(d),M(p),M(j),c&&u(F),g&&g.d(c),c&&u(W),M(G,c)}}}function Ue(s){let e,r,t=s[3].error.message+"",a;return{c(){e=v("p"),r=A("Oh no... "),a=A(t)},l(n){e=b(n,"P",{});var o=D(e);r=N(o,"Oh no... "),a=N(o,t),o.forEach(u)},m(n,o){I(n,e,o),_(e,r),_(e,a)},p(n,o){o&8&&t!==(t=n[3].error.message+"")&&Z(a,t)},i:C,o:C,d(n){n&&u(e)}}}function Ye(s){let e,r;return{c(){e=v("p"),r=A("Loading...")},l(t){e=b(t,"P",{});var a=D(e);r=N(a,"Loading..."),a.forEach(u)},m(t,a){I(t,e,a),_(e,r)},p:C,i:C,o:C,d(t){t&&u(e)}}}function me(s){let e,r,t,a;return e=new ee({props:{variant:"outlined",$$slots:{default:[Ze]},$$scope:{ctx:s}}}),e.$on("click",s[10]),t=new ee({props:{variant:"outlined",$$slots:{default:[ze]},$$scope:{ctx:s}}}),t.$on("click",s[11]),{c(){P(e.$$.fragment),r=H(),P(t.$$.fragment)},l(n){S(e.$$.fragment,n),r=O(n),S(t.$$.fragment,n)},m(n,o){L(e,n,o),I(n,r,o),L(t,n,o),a=!0},p(n,o){const l={};o&262144&&(l.$$scope={dirty:o,ctx:n}),e.$set(l);const m={};o&262144&&(m.$$scope={dirty:o,ctx:n}),t.$set(m)},i(n){a||(h(e.$$.fragment,n),h(t.$$.fragment,n),a=!0)},o(n){w(e.$$.fragment,n),w(t.$$.fragment,n),a=!1},d(n){M(e,n),n&&u(r),M(t,n)}}}function Ze(s){let e;return{c(){e=A("Edit")},l(r){e=N(r,"Edit")},m(r,t){I(r,e,t)},d(r){r&&u(e)}}}function ze(s){let e;return{c(){e=A("Delete")},l(r){e=N(r,"Delete")},m(r,t){I(r,e,t)},d(r){r&&u(e)}}}function Xe(s){return{c:C,l:C,m:C,p:C,d:C}}function ye(s){let e,r=s[17]+"";return{c(){e=v("p")},l(t){e=b(t,"P",{});var a=D(e);a.forEach(u)},m(t,a){I(t,e,a),e.innerHTML=r},p(t,a){a&8&&r!==(r=t[17]+"")&&(e.innerHTML=r)},d(t){t&&u(e)}}}function xe(s){return{c:C,l:C,m:C,p:C,d:C}}function et(s){let e,r,t={ctx:s,current:null,token:null,hasCatch:!1,pending:xe,then:ye,catch:Xe,value:17};return ce(r=ge(s[3].data.getGuide.guide),t),{c(){e=v("div"),t.block.c(),this.h()},l(a){e=b(a,"DIV",{class:!0});var n=D(e);t.block.l(n),n.forEach(u),this.h()},h(){V(e,"class","markdown-content break-words")},m(a,n){I(a,e,n),t.block.m(e,t.anchor=null),t.mount=()=>e,t.anchor=null},p(a,n){s=a,t.ctx=s,n&8&&r!==(r=ge(s[3].data.getGuide.guide))&&ce(r,t)||Ge(t,s,n)},d(a){a&&u(e),t.block.d(),t.token=null,t=null}}}function tt(s){let e,r;return e=new oe({props:{$$slots:{default:[et]},$$scope:{ctx:s}}}),{c(){P(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){L(e,t,a),r=!0},p(t,a){const n={};a&262152&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){M(e,t)}}}function pe(s){let e,r,t;function a(o){s[14](o)}let n={$$slots:{default:[ot]},$$scope:{ctx:s}};return s[6]!==void 0&&(n.open=s[6]),e=new Ee({props:n}),ue.push(()=>fe(e,"open",a)),{c(){P(e.$$.fragment)},l(o){S(e.$$.fragment,o)},m(o,l){L(e,o,l),t=!0},p(o,l){const m={};l&262144&&(m.$$scope={dirty:l,ctx:o}),!r&&l&64&&(r=!0,m.open=o[6],ie(()=>r=!1)),e.$set(m)},i(o){t||(h(e.$$.fragment,o),t=!0)},o(o){w(e.$$.fragment,o),t=!1},d(o){M(e,o)}}}function rt(s){let e;return{c(){e=A("Delete Guide?")},l(r){e=N(r,"Delete Guide?")},m(r,t){I(r,e,t)},d(r){r&&u(e)}}}function nt(s){let e;return{c(){e=A("Cancel")},l(r){e=N(r,"Cancel")},m(r,t){I(r,e,t)},d(r){r&&u(e)}}}function at(s){let e;return{c(){e=A("Delete")},l(r){e=N(r,"Delete")},m(r,t){I(r,e,t)},d(r){r&&u(e)}}}function st(s){let e,r,t,a,n,o,l,m;return n=new ee({props:{variant:"outlined",$$slots:{default:[nt]},$$scope:{ctx:s}}}),n.$on("click",s[12]),l=new ee({props:{variant:"outlined",$$slots:{default:[at]},$$scope:{ctx:s}}}),l.$on("click",s[13]),{c(){e=v("div"),r=v("span"),t=A("Are you sure you wish to delete this guide"),a=H(),P(n.$$.fragment),o=H(),P(l.$$.fragment),this.h()},l(f){e=b(f,"DIV",{class:!0});var d=D(e);r=b(d,"SPAN",{});var i=D(r);t=N(i,"Are you sure you wish to delete this guide"),i.forEach(u),a=O(d),S(n.$$.fragment,d),o=O(d),S(l.$$.fragment,d),d.forEach(u),this.h()},h(){V(e,"class","grid grid-flow-row gap-4")},m(f,d){I(f,e,d),_(e,r),_(r,t),_(e,a),L(n,e,null),_(e,o),L(l,e,null),m=!0},p(f,d){const i={};d&262144&&(i.$$scope={dirty:d,ctx:f}),n.$set(i);const $={};d&262144&&($.$$scope={dirty:d,ctx:f}),l.$set($)},i(f){m||(h(n.$$.fragment,f),h(l.$$.fragment,f),m=!0)},o(f){w(n.$$.fragment,f),w(l.$$.fragment,f),m=!1},d(f){f&&u(e),M(n),M(l)}}}function ot(s){let e,r,t,a;return e=new Ie({props:{$$slots:{default:[rt]},$$scope:{ctx:s}}}),t=new je({props:{$$slots:{default:[st]},$$scope:{ctx:s}}}),{c(){P(e.$$.fragment),r=H(),P(t.$$.fragment)},l(n){S(e.$$.fragment,n),r=O(n),S(t.$$.fragment,n)},m(n,o){L(e,n,o),I(n,r,o),L(t,n,o),a=!0},p(n,o){const l={};o&262144&&(l.$$scope={dirty:o,ctx:n}),e.$set(l);const m={};o&262144&&(m.$$scope={dirty:o,ctx:n}),t.$set(m)},i(n){a||(h(e.$$.fragment,n),h(t.$$.fragment,n),a=!0)},o(n){w(e.$$.fragment,n),w(t.$$.fragment,n),a=!1},d(n){M(e,n),n&&u(r),M(t,n)}}}function lt(s){let e,r;return{c(){e=v("span"),r=A(s[4])},l(t){e=b(t,"SPAN",{});var a=D(e);r=N(a,s[4]),a.forEach(u)},m(t,a){I(t,e,a),_(e,r)},p(t,a){a&16&&Z(r,t[4])},d(t){t&&u(e)}}}function it(s){let e,r,t,a,n,o,l=!s[3].fetching&&!s[3].error&&s[3].data.getGuide&&_e(s);const m=[Ye,Ue,Re,Qe],f=[];function d(i,$){return i[3].fetching?0:i[3].error?1:i[3].data.getGuide?2:3}return t=d(s),a=f[t]=m[t](s),{c(){l&&l.c(),e=X(),r=H(),a.c(),n=X()},l(i){const $=be('[data-svelte="svelte-bhfvpi"]',document.head);l&&l.l($),e=X(),$.forEach(u),r=O(i),a.l(i),n=X()},m(i,$){l&&l.m(document.head,null),_(document.head,e),I(i,r,$),f[t].m(i,$),I(i,n,$),o=!0},p(i,[$]){!i[3].fetching&&!i[3].error&&i[3].data.getGuide?l?(l.p(i,$),$&8&&h(l,1)):(l=_e(i),l.c(),h(l,1),l.m(e.parentNode,e)):l&&(x(),w(l,1,1,()=>{l=null}),y());let p=t;t=d(i),t===p?f[t].p(i,$):(x(),w(f[p],1,1,()=>{f[p]=null}),y(),a=f[t],a?a.p(i,$):(a=f[t]=m[t](i),a.c()),h(a,1),a.m(n.parentNode,n))},i(i){o||(h(l),h(a),o=!0)},o(i){w(l),w(a),o=!1},d(i){l&&l.d(i),u(e),i&&u(r),f[t].d(i),i&&u(n)}}}const he=ve(Ce,{guide:void 0}),Gt=Ne(async s=>(he.variables.guide=s.params.guideId,Ve({guide:he})(s)));function ut(s,e,r){let t,a,n=C,o=()=>(n(),n=ke(d,g=>r(3,a=g)),d),l,m;le(s,Te,g=>r(9,l=g)),s.$$.on_destroy.push(()=>n());let{guideId:f}=e,{guide:d}=e;o();let i="",$=!1;const p=we({query:Ae}),T=De(!1);le(s,T,g=>r(6,m=g));const j=()=>{p({guideId:f}).then(g=>{g.error?(console.error(g.error.message),r(4,i="Error deleting guide: "+g.error.message),r(2,$=!0)):$e(te+"/guides")})},F=()=>$e(te+"/guide/"+f+"/edit"),W=()=>T.set(!0),G=()=>T.set(!1),q=()=>j();function B(g){m=g,T.set(m)}function k(g){$=g,r(2,$)}return s.$$set=g=>{"guideId"in g&&r(0,f=g.guideId),"guide"in g&&o(r(1,d=g.guide))},s.$$.update=()=>{s.$$.dirty&520&&r(5,t=l?.roles?.deleteContent||l?.id===a?.data?.getGuide?.user?.id),s.$$.dirty&4&&($||r(4,i=""))},[f,d,$,a,i,t,m,T,j,l,F,W,G,q,B,k]}class It extends re{constructor(e){super();ne(this,e,ut,it,ae,{guideId:0,guide:1})}}export{It as default,Gt as load};
//# sourceMappingURL=index.svelte-0c7f0ac9.js.map
