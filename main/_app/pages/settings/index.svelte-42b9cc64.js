import{S as te,i as se,s as ae,bc as re,I as Y,J as Z,K as N,d as U,e as k,a8 as F,aW as ne,L as V,j as c,f as q,g as S,h as w,a9 as B,Y as v,N as M,l as j,Z as _,P as G,v as y,w as T,Q as C,a3 as oe,aF as ie,bd as le,ad as H,ac as ue,a7 as X,$ as fe,a0 as ce,aa as K,aL as me,n as pe}from"../../chunks/vendor-ec5ada1e.js";import{U as de}from"../../chunks/graphql-b763070c.js";import{T as $e}from"../../chunks/Toast-ae7e9d4e.js";import{g as _e}from"../../chunks/navigation-d7362a67.js";import{o as ge,b as he,c as ve,s as be,I as ke,e as Se,a as we,V as x,T as je}from"../../chunks/forms-2be97dc2.js";import{t as Ee}from"../../chunks/forms-41b68a57.js";import{a as ye}from"../../chunks/user-eeec5cd2.js";import{b as Te}from"../../chunks/paths-396f020f.js";import{M as Ie}from"../../chunks/MetaDescriptors-906e206a.js";import"../../chunks/singletons-d19c42e4.js";import"../../chunks/stores-bab812ef.js";function Pe(o){let e,t,s,a,i,f,m,n,p,g,h,$,r,d,l,I,E,D,z,J,O;p=new x({props:{for:"avatar",$$slots:{default:[De,({messages:u})=>({10:u}),({messages:u})=>u?1024:0]},$$scope:{ctx:o}}});function ee(u){o[7](u)}let Q={label:"Username",required:!0};return o[5].username!==void 0&&(Q.value=o[5].username),$=new je({props:Q}),Y.push(()=>Z($,"value",ee)),l=new x({props:{for:"username",$$slots:{default:[Ne,({messages:u})=>({10:u}),({messages:u})=>u?1024:0]},$$scope:{ctx:o}}}),D=new me({props:{type:"submit",variant:"outlined",$$slots:{default:[Ue]},$$scope:{ctx:o}}}),{c(){e=k("form"),t=k("div"),s=k("div"),a=k("label"),i=F("Avatar:"),f=U(),m=k("input"),n=U(),N(p.$$.fragment),g=U(),h=k("div"),N($.$$.fragment),d=U(),N(l.$$.fragment),I=U(),E=k("div"),N(D.$$.fragment),this.h()},l(u){e=S(u,"FORM",{});var b=w(e);t=S(b,"DIV",{class:!0});var P=w(t);s=S(P,"DIV",{class:!0});var A=w(s);a=S(A,"LABEL",{for:!0});var R=w(a);i=B(R,"Avatar:"),R.forEach(c),f=q(A),m=S(A,"INPUT",{id:!0,class:!0,name:!0,type:!0,accept:!0,placeholder:!0}),n=q(A),V(p.$$.fragment,A),A.forEach(c),g=q(P),h=S(P,"DIV",{class:!0});var L=w(h);V($.$$.fragment,L),d=q(L),V(l.$$.fragment,L),L.forEach(c),I=q(P),E=S(P,"DIV",{});var W=w(E);V(D.$$.fragment,W),W.forEach(c),P.forEach(c),b.forEach(c),this.h()},h(){v(a,"for","avatar"),v(m,"id","avatar"),v(m,"class","base-input"),v(m,"name","avatar"),v(m,"type","file"),v(m,"accept","image/png,image/jpeg,image/gif"),v(m,"placeholder","Avatar"),v(s,"class","grid grid-flow-row gap-2"),v(h,"class","grid grid-flow-row gap-2"),v(t,"class","grid grid-flow-row gap-6")},m(u,b){j(u,e,b),_(e,t),_(t,s),_(s,a),_(a,i),_(s,f),_(s,m),_(s,n),M(p,s,null),_(t,g),_(t,h),M($,h,null),_(h,d),M(l,h,null),_(t,I),_(t,E),M(D,E,null),z=!0,J||(O=pe(o[4].call(null,e)),J=!0)},p(u,b){const P={};b&3072&&(P.$$scope={dirty:b,ctx:u}),p.$set(P);const A={};!r&&b&32&&(r=!0,A.value=u[5].username,G(()=>r=!1)),$.$set(A);const R={};b&3072&&(R.$$scope={dirty:b,ctx:u}),l.$set(R);const L={};b&2048&&(L.$$scope={dirty:b,ctx:u}),D.$set(L)},i(u){z||(y(p.$$.fragment,u),y($.$$.fragment,u),y(l.$$.fragment,u),y(D.$$.fragment,u),z=!0)},o(u){T(p.$$.fragment,u),T($.$$.fragment,u),T(l.$$.fragment,u),T(D.$$.fragment,u),z=!1},d(u){u&&c(e),C(p),C($),C(l),C(D),J=!1,O()}}}function Ae(o){let e,t;return{c(){e=k("p"),t=F("Please log in")},l(s){e=S(s,"P",{});var a=w(e);t=B(a,"Please log in"),a.forEach(c)},m(s,a){j(s,e,a),_(e,t)},p:H,i:H,o:H,d(s){s&&c(e)}}}function De(o){let e,t=(o[10]||"")+"",s;return{c(){e=k("span"),s=F(t),this.h()},l(a){e=S(a,"SPAN",{class:!0});var i=w(e);s=B(i,t),i.forEach(c),this.h()},h(){v(e,"class","validation-message")},m(a,i){j(a,e,i),_(e,s)},p(a,i){i&1024&&t!==(t=(a[10]||"")+"")&&K(s,t)},d(a){a&&c(e)}}}function Ne(o){let e,t=(o[10]||"")+"",s;return{c(){e=k("span"),s=F(t),this.h()},l(a){e=S(a,"SPAN",{class:!0});var i=w(e);s=B(i,t),i.forEach(c),this.h()},h(){v(e,"class","validation-message")},m(a,i){j(a,e,i),_(e,s)},p(a,i){i&1024&&t!==(t=(a[10]||"")+"")&&K(s,t)},d(a){a&&c(e)}}}function Ue(o){let e;return{c(){e=F("Save")},l(t){e=B(t,"Save")},m(t,s){j(t,e,s)},d(t){t&&c(e)}}}function Ve(o){let e,t,s,a;const i=[Ae,Pe],f=[];function m(n,p){return n[2]===null?0:1}return e=m(o),t=f[e]=i[e](o),{c(){t.c(),s=X()},l(n){t.l(n),s=X()},m(n,p){f[e].m(n,p),j(n,s,p),a=!0},p(n,p){let g=e;e=m(n),e===g?f[e].p(n,p):(fe(),T(f[g],1,1,()=>{f[g]=null}),ce(),t=f[e],t?t.p(n,p):(t=f[e]=i[e](n),t.c()),y(t,1),t.m(s.parentNode,s))},i(n){a||(y(t),a=!0)},o(n){T(t),a=!1},d(n){f[e].d(n),n&&c(s)}}}function qe(o){let e,t;return e=new le({props:{$$slots:{default:[Ve]},$$scope:{ctx:o}}}),{c(){N(e.$$.fragment)},l(s){V(e.$$.fragment,s)},m(s,a){M(e,s,a),t=!0},p(s,a){const i={};a&2084&&(i.$$scope={dirty:a,ctx:s}),e.$set(i)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){T(e.$$.fragment,s),t=!1},d(s){C(e,s)}}}function Me(o){let e,t;return{c(){e=k("span"),t=F(o[3])},l(s){e=S(s,"SPAN",{});var a=w(e);t=B(a,o[3]),a.forEach(c)},m(s,a){j(s,e,a),_(e,t)},p(s,a){a&8&&K(t,s[3])},d(s){s&&c(e)}}}function Ce(o){let e,t,s,a,i,f,m,n,p,g;e=new Ie({props:{description:"Change your user settings",title:"Settings"}}),f=new re({props:{$$slots:{default:[qe]},$$scope:{ctx:o}}});function h(r){o[8](r)}let $={$$slots:{default:[Me]},$$scope:{ctx:o}};return o[0]!==void 0&&($.running=o[0]),n=new $e({props:$}),Y.push(()=>Z(n,"running",h)),{c(){N(e.$$.fragment),t=U(),s=k("h1"),a=F("Settings"),i=U(),N(f.$$.fragment),m=U(),N(n.$$.fragment),this.h()},l(r){const d=ne('[data-svelte="svelte-1ae5i2c"]',document.head);V(e.$$.fragment,d),d.forEach(c),t=q(r),s=S(r,"H1",{class:!0});var l=w(s);a=B(l,"Settings"),l.forEach(c),i=q(r),V(f.$$.fragment,r),m=q(r),V(n.$$.fragment,r),this.h()},h(){v(s,"class","text-4xl my-4 font-bold")},m(r,d){M(e,document.head,null),j(r,t,d),j(r,s,d),_(s,a),j(r,i,d),M(f,r,d),j(r,m,d),M(n,r,d),g=!0},p(r,[d]){const l={};d&2084&&(l.$$scope={dirty:d,ctx:r}),f.$set(l);const I={};d&2056&&(I.$$scope={dirty:d,ctx:r}),!p&&d&1&&(p=!0,I.running=r[0],G(()=>p=!1)),n.$set(I)},i(r){g||(y(e.$$.fragment,r),y(f.$$.fragment,r),y(n.$$.fragment,r),g=!0)},o(r){T(e.$$.fragment,r),T(f.$$.fragment,r),T(n.$$.fragment,r),g=!1},d(r){C(e),r&&c(t),r&&c(s),r&&c(i),C(f,r),r&&c(m),C(n,r)}}}function Le(o,e,t){let s,a,i=H,f=()=>(i(),i=ue($,l=>t(5,a=l)),$);oe(o,ye,l=>t(2,s=l)),o.$$.on_destroy.push(()=>i());let m="",n=!1;const p=ie({query:de}),g=ge({avatar:he(ve().refine(l=>"name"in l&&"size"in l&&"type"in l)),username:be().min(3).max(32)});let h,$;function r(l){o.$$.not_equal(a.username,l)&&(a.username=l,$.set(a))}function d(l){n=l,t(0,n),t(2,s)}return o.$$.update=()=>{if(o.$$.dirty&4&&s){const l=ke({initialValues:{username:s.username},extend:[Se,we],validateSchema:g,onSubmit:I=>{p({user:Ee(I,g),userId:s.id}).then(E=>{E.error?(console.error(E.error.message),t(3,m="Error editing guide: "+E.error.message),t(0,n=!0)):_e(Te+"/user/"+E.data.updateUser.id)})}});t(4,h=l.form),f(t(1,$=l.data))}o.$$.dirty&1&&(n||t(3,m=""))},[n,$,s,m,h,a,g,r,d]}class Ze extends te{constructor(e){super();se(this,e,Le,Ce,ae,{userSchema:6})}get userSchema(){return this.$$.ctx[6]}}export{Ze as default};
//# sourceMappingURL=index.svelte-42b9cc64.js.map
