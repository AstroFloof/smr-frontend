import{S as O,i as z,s as A,a6 as E,a7 as M,a8 as T,t as g,q as $,aa as w,ba as G,T as H,ai as W,V as C,d as y,e as D,W as S,aT as X,h as c,j as N,f as I,g as P,X as q,k as Y,m as k,l as h,C as B,aj as K,aC as Q,J as R,aB as U,aD as Z,bb as x,B as F,az as ee,Y as J,$ as v}from"../../../chunks/vendor-3e0baac1.js";import{p as te}from"../../../chunks/routing-689f9c1f.js";import{v as oe,J as ae}from"../../../chunks/graphql-b763070c.js";import{T as se}from"../../../chunks/Toast-a8ec85f8.js";import{g as re}from"../../../chunks/navigation-d7362a67.js";import{M as ne}from"../../../chunks/ModForm-72a22ac0.js";import{b as ie}from"../../../chunks/paths-396f020f.js";import{M as me}from"../../../chunks/MetaDescriptors-f7ef5770.js";import"../../../chunks/singletons-d19c42e4.js";import"../../../chunks/forms-7ab15406.js";import"../../../chunks/forms-3ac04b20.js";import"../../../chunks/markdown-e391b8a1.js";import"../../../chunks/extras-7497b851.js";import"../../../chunks/stores-7dc89ead.js";function L(r){let t,o;return t=new me({props:{description:"Editing mod "+r[1].data.mod.name,title:"Edit mod "+r[1].data.mod.name,image:r[1].data.mod.logo}}),{c(){E(t.$$.fragment)},l(e){M(t.$$.fragment,e)},m(e,a){T(t,e,a),o=!0},p(e,a){const i={};a&2&&(i.description="Editing mod "+e[1].data.mod.name),a&2&&(i.title="Edit mod "+e[1].data.mod.name),a&2&&(i.image=e[1].data.mod.logo),t.$set(i)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){w(t,e)}}}function fe(r){let t,o;return t=new ne({props:{onSubmit:r[5],initialValues:r[3],editing:!0,submitText:"Save"}}),{c(){E(t.$$.fragment)},l(e){M(t.$$.fragment,e)},m(e,a){T(t,e,a),o=!0},p(e,a){const i={};a&8&&(i.initialValues=e[3]),t.$set(i)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){w(t,e)}}}function le(r){let t,o,e=r[1].error.message+"",a;return{c(){t=D("p"),o=S("Oh no... "),a=S(e)},l(i){t=I(i,"P",{});var m=P(t);o=q(m,"Oh no... "),a=q(m,e),m.forEach(c)},m(i,m){h(i,t,m),k(t,o),k(t,a)},p(i,m){m&2&&e!==(e=i[1].error.message+"")&&J(a,e)},i:v,o:v,d(i){i&&c(t)}}}function ce(r){let t,o;return{c(){t=D("p"),o=S("Loading...")},l(e){t=I(e,"P",{});var a=P(t);o=q(a,"Loading..."),a.forEach(c)},m(e,a){h(e,t,a),k(t,o)},p:v,i:v,o:v,d(e){e&&c(t)}}}function de(r){let t,o,e,a;const i=[ce,le,fe],m=[];function d(n,u){return n[1].fetching?0:n[1].error?1:2}return t=d(r),o=m[t]=i[t](r),{c(){o.c(),e=C()},l(n){o.l(n),e=C()},m(n,u){m[t].m(n,u),h(n,e,u),a=!0},p(n,u){let p=t;t=d(n),t===p?m[t].p(n,u):(F(),$(m[p],1,1,()=>{m[p]=null}),B(),o=m[t],o?o.p(n,u):(o=m[t]=i[t](n),o.c()),g(o,1),o.m(e.parentNode,e))},i(n){a||(g(o),a=!0)},o(n){$(o),a=!1},d(n){m[t].d(n),n&&c(e)}}}function ue(r){let t,o;return t=new x({props:{$$slots:{default:[de]},$$scope:{ctx:r}}}),{c(){E(t.$$.fragment)},l(e){M(t.$$.fragment,e)},m(e,a){T(t,e,a),o=!0},p(e,a){const i={};a&522&&(i.$$scope={dirty:a,ctx:e}),t.$set(i)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){w(t,e)}}}function pe(r){let t,o;return{c(){t=D("span"),o=S(r[2])},l(e){t=I(e,"SPAN",{});var a=P(t);o=q(a,r[2]),a.forEach(c)},m(e,a){h(e,t,a),k(t,o)},p(e,a){a&4&&J(o,e[2])},d(e){e&&c(t)}}}function _e(r){let t,o,e,a,i,m,d,n,u,p,f=!r[1].fetching&&!r[1].error&&r[1].data.mod&&L(r);m=new G({props:{$$slots:{default:[ue]},$$scope:{ctx:r}}});function _(s){r[7](s)}let b={$$slots:{default:[pe]},$$scope:{ctx:r}};return r[0]!==void 0&&(b.running=r[0]),n=new se({props:b}),H.push(()=>W(n,"running",_)),{c(){f&&f.c(),t=C(),o=y(),e=D("h1"),a=S("Edit Mod"),i=y(),E(m.$$.fragment),d=y(),E(n.$$.fragment),this.h()},l(s){const l=X('[data-svelte="svelte-mi1wi5"]',document.head);f&&f.l(l),t=C(),l.forEach(c),o=N(s),e=I(s,"H1",{class:!0});var j=P(e);a=q(j,"Edit Mod"),j.forEach(c),i=N(s),M(m.$$.fragment,s),d=N(s),M(n.$$.fragment,s),this.h()},h(){Y(e,"class","text-4xl my-4 font-bold")},m(s,l){f&&f.m(document.head,null),k(document.head,t),h(s,o,l),h(s,e,l),k(e,a),h(s,i,l),T(m,s,l),h(s,d,l),T(n,s,l),p=!0},p(s,[l]){!s[1].fetching&&!s[1].error&&s[1].data.mod?f?(f.p(s,l),l&2&&g(f,1)):(f=L(s),f.c(),g(f,1),f.m(t.parentNode,t)):f&&(F(),$(f,1,1,()=>{f=null}),B());const j={};l&522&&(j.$$scope={dirty:l,ctx:s}),m.$set(j);const V={};l&516&&(V.$$scope={dirty:l,ctx:s}),!u&&l&1&&(u=!0,V.running=s[0],K(()=>u=!1)),n.$set(V)},i(s){p||(g(f),g(m.$$.fragment,s),g(n.$$.fragment,s),p=!0)},o(s){$(f),$(m.$$.fragment,s),$(n.$$.fragment,s),p=!1},d(s){f&&f.d(s),c(t),s&&c(o),s&&c(e),s&&c(i),w(m,s),s&&c(d),w(n,s)}}}const Ie=te();function ge(r,t,o){let e,a,{modId:i}=t,m="",d=!1;const n=Q(oe,{mod:i});R(r,n,_=>o(1,a=_));const u=U({query:ae}),p=_=>{u({modId:ee(n).data.mod.id,mod:_}).then(b=>{b.error?(console.error(b.error.message),o(2,m="Error editing mod: "+b.error.message),o(0,d=!0)):re(ie+"/mod/"+b.data.updateMod.id)})};Z(n);function f(_){d=_,o(0,d)}return r.$$set=_=>{"modId"in _&&o(6,i=_.modId)},r.$$.update=()=>{r.$$.dirty&1&&(d||o(2,m="")),r.$$.dirty&2&&o(3,e=a.data?{...a.data.mod,logo:void 0}:void 0)},[d,a,m,e,n,p,i,f]}class Pe extends O{constructor(t){super();z(this,t,ge,_e,A,{modId:6})}}export{Pe as default,Ie as load};
//# sourceMappingURL=edit.svelte-64cd78a4.js.map
