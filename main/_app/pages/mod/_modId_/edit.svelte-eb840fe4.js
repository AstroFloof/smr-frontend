import{S as H,i as O,s as B,G as j,H as M,I as w,n as g,t as $,L as S,aD as J,u as U,W,b as T,a as L,e as q,B as v,ai as X,g as d,h as N,c as C,f as P,C as D,A as Y,a3 as k,k as h,m as V,X as Z,_ as z,Y as K,Z as Q,$ as R,aE as x,l as A,U as ee,D as F,r as I}from"../../../chunks/vendor-1e069c58.js";import{p as te}from"../../../chunks/routing-689f9c1f.js";import{v as oe,J as se}from"../../../chunks/graphql-4793b2e5.js";import{T as re}from"../../../chunks/Toast-a9d3b864.js";import{g as ne}from"../../../chunks/navigation-ca50617e.js";import{M as ae}from"../../../chunks/ModForm-5e95068f.js";import{b as ie}from"../../../chunks/paths-396f020f.js";import{M as me}from"../../../chunks/MetaDescriptors-bbb3ab7e.js";import"../../../chunks/singletons-4fc5a6de.js";import"../../../chunks/forms-03cc218f.js";import"../../../chunks/forms-9437931d.js";import"../../../chunks/markdown-17d20b45.js";import"../../../chunks/extras-2ac9de80.js";import"../../../chunks/stores-fad2d8b8.js";function G(n){let t,o;return t=new me({props:{description:"Editing mod "+n[1].data.mod.name,title:"Edit mod "+n[1].data.mod.name,image:n[1].data.mod.logo}}),{c(){j(t.$$.fragment)},l(e){M(t.$$.fragment,e)},m(e,s){w(t,e,s),o=!0},p(e,s){const i={};s&2&&(i.description="Editing mod "+e[1].data.mod.name),s&2&&(i.title="Edit mod "+e[1].data.mod.name),s&2&&(i.image=e[1].data.mod.logo),t.$set(i)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){S(t,e)}}}function fe(n){let t,o;return t=new ae({props:{onSubmit:n[5],initialValues:n[3],editing:!0,submitText:"Save"}}),{c(){j(t.$$.fragment)},l(e){M(t.$$.fragment,e)},m(e,s){w(t,e,s),o=!0},p(e,s){const i={};s&8&&(i.initialValues=e[3]),t.$set(i)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){S(t,e)}}}function le(n){let t,o,e=n[1].error.message+"",s;return{c(){t=q("p"),o=v("Oh no... "),s=v(e)},l(i){t=C(i,"P",{});var m=P(t);o=D(m,"Oh no... "),s=D(m,e),m.forEach(d)},m(i,m){h(i,t,m),k(t,o),k(t,s)},p(i,m){m&2&&e!==(e=i[1].error.message+"")&&F(s,e)},i:I,o:I,d(i){i&&d(t)}}}function de(n){let t,o;return{c(){t=q("p"),o=v("Loading...")},l(e){t=C(e,"P",{});var s=P(t);o=D(s,"Loading..."),s.forEach(d)},m(e,s){h(e,t,s),k(t,o)},p:I,i:I,o:I,d(e){e&&d(t)}}}function ce(n){let t,o,e,s;const i=[de,le,fe],m=[];function c(a,u){return a[1].fetching?0:a[1].error?1:2}return t=c(n),o=m[t]=i[t](n),{c(){o.c(),e=T()},l(a){o.l(a),e=T()},m(a,u){m[t].m(a,u),h(a,e,u),s=!0},p(a,u){let p=t;t=c(a),t===p?m[t].p(a,u):(A(),$(m[p],1,1,()=>{m[p]=null}),V(),o=m[t],o?o.p(a,u):(o=m[t]=i[t](a),o.c()),g(o,1),o.m(e.parentNode,e))},i(a){s||(g(o),s=!0)},o(a){$(o),s=!1},d(a){m[t].d(a),a&&d(e)}}}function ue(n){let t,o;return t=new x({props:{$$slots:{default:[ce]},$$scope:{ctx:n}}}),{c(){j(t.$$.fragment)},l(e){M(t.$$.fragment,e)},m(e,s){w(t,e,s),o=!0},p(e,s){const i={};s&522&&(i.$$scope={dirty:s,ctx:e}),t.$set(i)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){S(t,e)}}}function pe(n){let t,o;return{c(){t=q("span"),o=v(n[2])},l(e){t=C(e,"SPAN",{});var s=P(t);o=D(s,n[2]),s.forEach(d)},m(e,s){h(e,t,s),k(t,o)},p(e,s){s&4&&F(o,e[2])},d(e){e&&d(t)}}}function _e(n){let t,o,e,s,i,m,c,a,u,p,f=!n[1].fetching&&!n[1].error&&n[1].data.mod&&G(n);m=new J({props:{$$slots:{default:[ue]},$$scope:{ctx:n}}});function _(r){n[7](r)}let b={$$slots:{default:[pe]},$$scope:{ctx:n}};return n[0]!==void 0&&(b.running=n[0]),a=new re({props:b}),U.push(()=>W(a,"running",_)),{c(){f&&f.c(),t=T(),o=L(),e=q("h1"),s=v("Edit Mod"),i=L(),j(m.$$.fragment),c=L(),j(a.$$.fragment),this.h()},l(r){const l=X('[data-svelte="svelte-mi1wi5"]',document.head);f&&f.l(l),t=T(),l.forEach(d),o=N(r),e=C(r,"H1",{class:!0});var E=P(e);s=D(E,"Edit Mod"),E.forEach(d),i=N(r),M(m.$$.fragment,r),c=N(r),M(a.$$.fragment,r),this.h()},h(){Y(e,"class","text-4xl my-4 font-bold")},m(r,l){f&&f.m(document.head,null),k(document.head,t),h(r,o,l),h(r,e,l),k(e,s),h(r,i,l),w(m,r,l),h(r,c,l),w(a,r,l),p=!0},p(r,[l]){!r[1].fetching&&!r[1].error&&r[1].data.mod?f?(f.p(r,l),l&2&&g(f,1)):(f=G(r),f.c(),g(f,1),f.m(t.parentNode,t)):f&&(A(),$(f,1,1,()=>{f=null}),V());const E={};l&522&&(E.$$scope={dirty:l,ctx:r}),m.$set(E);const y={};l&516&&(y.$$scope={dirty:l,ctx:r}),!u&&l&1&&(u=!0,y.running=r[0],Z(()=>u=!1)),a.$set(y)},i(r){p||(g(f),g(m.$$.fragment,r),g(a.$$.fragment,r),p=!0)},o(r){$(f),$(m.$$.fragment,r),$(a.$$.fragment,r),p=!1},d(r){f&&f.d(r),d(t),r&&d(o),r&&d(e),r&&d(i),S(m,r),r&&d(c),S(a,r)}}}const Ce=te();function ge(n,t,o){let e,s,{modId:i}=t,m="",c=!1;const a=z(oe,{mod:i});K(n,a,_=>o(1,s=_));const u=Q({query:se}),p=_=>{u({modId:ee(a).data.mod.id,mod:_}).then(b=>{b.error?(console.error(b.error.message),o(2,m="Error editing mod: "+b.error.message),o(0,c=!0)):ne(ie+"/mod/"+b.data.updateMod.id)})};R(a);function f(_){c=_,o(0,c)}return n.$$set=_=>{"modId"in _&&o(6,i=_.modId)},n.$$.update=()=>{n.$$.dirty&1&&(c||o(2,m="")),n.$$.dirty&2&&o(3,e=s.data?{...s.data.mod,logo:void 0}:void 0)},[c,s,m,e,a,p,i,f]}class Pe extends H{constructor(t){super();O(this,t,ge,_e,B,{modId:6})}}export{Pe as default,Ce as load};
//# sourceMappingURL=edit.svelte-eb840fe4.js.map
