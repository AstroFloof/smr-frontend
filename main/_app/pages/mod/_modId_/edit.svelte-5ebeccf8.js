import{S as J,i as O,s as A,K as E,L as M,N as w,v as g,w as $,Q as v,bc as K,I as Q,J as W,a7 as q,d as C,e as D,a8 as S,aW as Y,j as d,f as F,g as P,h as N,a9 as I,Y as Z,Z as k,l as h,a0 as L,P as z,aG as B,a3 as R,aF as U,aH as X,bd as x,$ as V,aD as ee,aa as G,ad as T}from"../../../chunks/vendor-ec5ada1e.js";import{p as te}from"../../../chunks/routing-689f9c1f.js";import{v as oe,J as se}from"../../../chunks/graphql-b763070c.js";import{T as ae}from"../../../chunks/Toast-ae7e9d4e.js";import{g as re}from"../../../chunks/navigation-d7362a67.js";import{M as ne}from"../../../chunks/ModForm-fd32b1d8.js";import{b as ie}from"../../../chunks/paths-396f020f.js";import{M as me}from"../../../chunks/MetaDescriptors-906e206a.js";import"../../../chunks/singletons-d19c42e4.js";import"../../../chunks/forms-2be97dc2.js";import"../../../chunks/forms-41b68a57.js";import"../../../chunks/markdown-e391b8a1.js";import"../../../chunks/extras-7497b851.js";import"../../../chunks/stores-bab812ef.js";function H(r){let t,o;return t=new me({props:{description:"Editing mod "+r[1].data.mod.name,title:"Edit mod "+r[1].data.mod.name,image:r[1].data.mod.logo}}),{c(){E(t.$$.fragment)},l(e){M(t.$$.fragment,e)},m(e,s){w(t,e,s),o=!0},p(e,s){const i={};s&2&&(i.description="Editing mod "+e[1].data.mod.name),s&2&&(i.title="Edit mod "+e[1].data.mod.name),s&2&&(i.image=e[1].data.mod.logo),t.$set(i)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){v(t,e)}}}function fe(r){let t,o;return t=new ne({props:{onSubmit:r[5],initialValues:r[3],editing:!0,submitText:"Save"}}),{c(){E(t.$$.fragment)},l(e){M(t.$$.fragment,e)},m(e,s){w(t,e,s),o=!0},p(e,s){const i={};s&8&&(i.initialValues=e[3]),t.$set(i)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){v(t,e)}}}function le(r){let t,o,e=r[1].error.message+"",s;return{c(){t=D("p"),o=S("Oh no... "),s=S(e)},l(i){t=P(i,"P",{});var m=N(t);o=I(m,"Oh no... "),s=I(m,e),m.forEach(d)},m(i,m){h(i,t,m),k(t,o),k(t,s)},p(i,m){m&2&&e!==(e=i[1].error.message+"")&&G(s,e)},i:T,o:T,d(i){i&&d(t)}}}function de(r){let t,o;return{c(){t=D("p"),o=S("Loading...")},l(e){t=P(e,"P",{});var s=N(t);o=I(s,"Loading..."),s.forEach(d)},m(e,s){h(e,t,s),k(t,o)},p:T,i:T,o:T,d(e){e&&d(t)}}}function ce(r){let t,o,e,s;const i=[de,le,fe],m=[];function c(n,u){return n[1].fetching?0:n[1].error?1:2}return t=c(r),o=m[t]=i[t](r),{c(){o.c(),e=q()},l(n){o.l(n),e=q()},m(n,u){m[t].m(n,u),h(n,e,u),s=!0},p(n,u){let p=t;t=c(n),t===p?m[t].p(n,u):(V(),$(m[p],1,1,()=>{m[p]=null}),L(),o=m[t],o?o.p(n,u):(o=m[t]=i[t](n),o.c()),g(o,1),o.m(e.parentNode,e))},i(n){s||(g(o),s=!0)},o(n){$(o),s=!1},d(n){m[t].d(n),n&&d(e)}}}function ue(r){let t,o;return t=new x({props:{$$slots:{default:[ce]},$$scope:{ctx:r}}}),{c(){E(t.$$.fragment)},l(e){M(t.$$.fragment,e)},m(e,s){w(t,e,s),o=!0},p(e,s){const i={};s&522&&(i.$$scope={dirty:s,ctx:e}),t.$set(i)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){v(t,e)}}}function pe(r){let t,o;return{c(){t=D("span"),o=S(r[2])},l(e){t=P(e,"SPAN",{});var s=N(t);o=I(s,r[2]),s.forEach(d)},m(e,s){h(e,t,s),k(t,o)},p(e,s){s&4&&G(o,e[2])},d(e){e&&d(t)}}}function _e(r){let t,o,e,s,i,m,c,n,u,p,f=!r[1].fetching&&!r[1].error&&r[1].data.mod&&H(r);m=new K({props:{$$slots:{default:[ue]},$$scope:{ctx:r}}});function _(a){r[7](a)}let b={$$slots:{default:[pe]},$$scope:{ctx:r}};return r[0]!==void 0&&(b.running=r[0]),n=new ae({props:b}),Q.push(()=>W(n,"running",_)),{c(){f&&f.c(),t=q(),o=C(),e=D("h1"),s=S("Edit Mod"),i=C(),E(m.$$.fragment),c=C(),E(n.$$.fragment),this.h()},l(a){const l=Y('[data-svelte="svelte-mi1wi5"]',document.head);f&&f.l(l),t=q(),l.forEach(d),o=F(a),e=P(a,"H1",{class:!0});var j=N(e);s=I(j,"Edit Mod"),j.forEach(d),i=F(a),M(m.$$.fragment,a),c=F(a),M(n.$$.fragment,a),this.h()},h(){Z(e,"class","text-4xl my-4 font-bold")},m(a,l){f&&f.m(document.head,null),k(document.head,t),h(a,o,l),h(a,e,l),k(e,s),h(a,i,l),w(m,a,l),h(a,c,l),w(n,a,l),p=!0},p(a,[l]){!a[1].fetching&&!a[1].error&&a[1].data.mod?f?(f.p(a,l),l&2&&g(f,1)):(f=H(a),f.c(),g(f,1),f.m(t.parentNode,t)):f&&(V(),$(f,1,1,()=>{f=null}),L());const j={};l&522&&(j.$$scope={dirty:l,ctx:a}),m.$set(j);const y={};l&516&&(y.$$scope={dirty:l,ctx:a}),!u&&l&1&&(u=!0,y.running=a[0],z(()=>u=!1)),n.$set(y)},i(a){p||(g(f),g(m.$$.fragment,a),g(n.$$.fragment,a),p=!0)},o(a){$(f),$(m.$$.fragment,a),$(n.$$.fragment,a),p=!1},d(a){f&&f.d(a),d(t),a&&d(o),a&&d(e),a&&d(i),v(m,a),a&&d(c),v(n,a)}}}const Pe=te();function ge(r,t,o){let e,s,{modId:i}=t,m="",c=!1;const n=B(oe,{mod:i});R(r,n,_=>o(1,s=_));const u=U({query:se}),p=_=>{u({modId:ee(n).data.mod.id,mod:_}).then(b=>{b.error?(console.error(b.error.message),o(2,m="Error editing mod: "+b.error.message),o(0,c=!0)):re(ie+"/mod/"+b.data.updateMod.id)})};X(n);function f(_){c=_,o(0,c)}return r.$$set=_=>{"modId"in _&&o(6,i=_.modId)},r.$$.update=()=>{r.$$.dirty&1&&(c||o(2,m="")),r.$$.dirty&2&&o(3,e=s.data?{...s.data.mod,logo:void 0}:void 0)},[c,s,m,e,n,p,i,f]}class Ne extends J{constructor(t){super();O(this,t,ge,_e,A,{modId:6})}}export{Ne as default,Pe as load};
//# sourceMappingURL=edit.svelte-5ebeccf8.js.map
