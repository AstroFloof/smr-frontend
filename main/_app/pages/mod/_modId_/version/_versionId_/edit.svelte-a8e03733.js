import{S as G,i as H,s as O,G as v,H as V,I as j,m as g,t as h,L as E,aD as R,u as z,W as U,b as D,a as P,e as T,B as I,ai as W,f as l,g as L,c as q,d as M,C as S,A as X,a3 as k,j as $,l as N,X as Y,_ as Z,Y as J,Z as K,$ as Q,aE as x,k as A,D as B,r as w}from"../../../../../chunks/vendor-556bddb0.js";import{p as ee}from"../../../../../chunks/routing-689f9c1f.js";import{B as te,I as re}from"../../../../../chunks/graphql-4793b2e5.js";import{T as ne}from"../../../../../chunks/Toast-9a5a4434.js";import{g as se}from"../../../../../chunks/navigation-d7362a67.js";import{V as oe}from"../../../../../chunks/VersionForm-a0e76951.js";import{b as ae}from"../../../../../chunks/paths-396f020f.js";import{M as ie}from"../../../../../chunks/MetaDescriptors-27aa6f3e.js";import"../../../../../chunks/singletons-d19c42e4.js";import"../../../../../chunks/forms-77c0974d.js";import"../../../../../chunks/jszip-b1f4f406.js";import"../../../../../chunks/extras-2ac9de80.js";import"../../../../../chunks/uplugin-4824e5c7.js";import"../../../../../chunks/api-82c76902.js";import"../../../../../chunks/user-d1f56c1d.js";import"../../../../../chunks/forms-893033cc.js";import"../../../../../chunks/markdown-17d20b45.js";import"../../../../../chunks/formatting-24701f16.js";import"../../../../../chunks/stores-e6767543.js";function F(o){let t,r;return t=new ie({props:{description:"Editing mod version "+o[1].data.getVersion.mod.name+" "+o[1].data.getVersion.version,title:"Edit mod version "+o[1].data.getVersion.mod.name+" "+o[1].data.getVersion.version}}),{c(){v(t.$$.fragment)},l(e){V(t.$$.fragment,e)},m(e,n){j(t,e,n),r=!0},p(e,n){const f={};n&2&&(f.description="Editing mod version "+e[1].data.getVersion.mod.name+" "+e[1].data.getVersion.version),n&2&&(f.title="Edit mod version "+e[1].data.getVersion.mod.name+" "+e[1].data.getVersion.version),t.$set(f)},i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){h(t.$$.fragment,e),r=!1},d(e){E(t,e)}}}function fe(o){let t,r;return t=new oe({props:{onSubmit:o[5],initialValues:o[3],modReference:o[1].data.getVersion.mod.mod_reference,editing:!0,submitText:"Save"}}),{c(){v(t.$$.fragment)},l(e){V(t.$$.fragment,e)},m(e,n){j(t,e,n),r=!0},p(e,n){const f={};n&8&&(f.initialValues=e[3]),n&2&&(f.modReference=e[1].data.getVersion.mod.mod_reference),t.$set(f)},i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){h(t.$$.fragment,e),r=!1},d(e){E(t,e)}}}function me(o){let t,r,e=o[1].error.message+"",n;return{c(){t=T("p"),r=I("Oh no... "),n=I(e)},l(f){t=q(f,"P",{});var i=M(t);r=S(i,"Oh no... "),n=S(i,e),i.forEach(l)},m(f,i){$(f,t,i),k(t,r),k(t,n)},p(f,i){i&2&&e!==(e=f[1].error.message+"")&&B(n,e)},i:w,o:w,d(f){f&&l(t)}}}function ce(o){let t,r;return{c(){t=T("p"),r=I("Loading...")},l(e){t=q(e,"P",{});var n=M(t);r=S(n,"Loading..."),n.forEach(l)},m(e,n){$(e,t,n),k(t,r)},p:w,i:w,o:w,d(e){e&&l(t)}}}function ue(o){let t,r,e,n;const f=[ce,me,fe],i=[];function p(a,u){return a[1].fetching?0:a[1].error?1:2}return t=p(o),r=i[t]=f[t](o),{c(){r.c(),e=D()},l(a){r.l(a),e=D()},m(a,u){i[t].m(a,u),$(a,e,u),n=!0},p(a,u){let _=t;t=p(a),t===_?i[t].p(a,u):(A(),h(i[_],1,1,()=>{i[_]=null}),N(),r=i[t],r?r.p(a,u):(r=i[t]=f[t](a),r.c()),g(r,1),r.m(e.parentNode,e))},i(a){n||(g(r),n=!0)},o(a){h(r),n=!1},d(a){i[t].d(a),a&&l(e)}}}function le(o){let t,r;return t=new x({props:{$$slots:{default:[ue]},$$scope:{ctx:o}}}),{c(){v(t.$$.fragment)},l(e){V(t.$$.fragment,e)},m(e,n){j(t,e,n),r=!0},p(e,n){const f={};n&1034&&(f.$$scope={dirty:n,ctx:e}),t.$set(f)},i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){h(t.$$.fragment,e),r=!1},d(e){E(t,e)}}}function de(o){let t,r;return{c(){t=T("span"),r=I(o[2])},l(e){t=q(e,"SPAN",{});var n=M(t);r=S(n,o[2]),n.forEach(l)},m(e,n){$(e,t,n),k(t,r)},p(e,n){n&4&&B(r,e[2])},d(e){e&&l(t)}}}function pe(o){let t,r,e,n,f,i,p,a,u,_,m=!o[1].fetching&&!o[1].error&&o[1].data.getVersion&&F(o);i=new R({props:{$$slots:{default:[le]},$$scope:{ctx:o}}});function y(s){o[8](s)}let d={$$slots:{default:[de]},$$scope:{ctx:o}};return o[0]!==void 0&&(d.running=o[0]),a=new ne({props:d}),z.push(()=>U(a,"running",y)),{c(){m&&m.c(),t=D(),r=P(),e=T("h1"),n=I("Edit Version"),f=P(),v(i.$$.fragment),p=P(),v(a.$$.fragment),this.h()},l(s){const c=W('[data-svelte="svelte-1gp98ge"]',document.head);m&&m.l(c),t=D(),c.forEach(l),r=L(s),e=q(s,"H1",{class:!0});var b=M(e);n=S(b,"Edit Version"),b.forEach(l),f=L(s),V(i.$$.fragment,s),p=L(s),V(a.$$.fragment,s),this.h()},h(){X(e,"class","text-4xl my-4 font-bold")},m(s,c){m&&m.m(document.head,null),k(document.head,t),$(s,r,c),$(s,e,c),k(e,n),$(s,f,c),j(i,s,c),$(s,p,c),j(a,s,c),_=!0},p(s,[c]){!s[1].fetching&&!s[1].error&&s[1].data.getVersion?m?(m.p(s,c),c&2&&g(m,1)):(m=F(s),m.c(),g(m,1),m.m(t.parentNode,t)):m&&(A(),h(m,1,1,()=>{m=null}),N());const b={};c&1034&&(b.$$scope={dirty:c,ctx:s}),i.$set(b);const C={};c&1028&&(C.$$scope={dirty:c,ctx:s}),!u&&c&1&&(u=!0,C.running=s[0],Y(()=>u=!1)),a.$set(C)},i(s){_||(g(m),g(i.$$.fragment,s),g(a.$$.fragment,s),_=!0)},o(s){h(m),h(i.$$.fragment,s),h(a.$$.fragment,s),_=!1},d(s){m&&m.d(s),l(t),s&&l(r),s&&l(e),s&&l(f),E(i,s),s&&l(p),E(a,s)}}}const Le=ee();function _e(o,t,r){let e,n,{modId:f}=t,{versionId:i}=t,p="",a=!1;const u=Z(te,{version:i});J(o,u,d=>r(1,n=d));const _=K({query:re}),m=async d=>_({versionId:i,version:d}).then(s=>{if(s.error)console.error(s.error.message),r(2,p="Error editing version: "+s.error.message),r(0,a=!0);else return se(ae+"/mod/"+f+"/version/"+i)});Q(u);function y(d){a=d,r(0,a)}return o.$$set=d=>{"modId"in d&&r(6,f=d.modId),"versionId"in d&&r(7,i=d.versionId)},o.$$.update=()=>{o.$$.dirty&1&&(a||r(2,p="")),o.$$.dirty&2&&r(3,e=n.data?{...n.data.getVersion,logo:void 0}:void 0)},[a,n,p,e,u,m,f,i,y]}class Ne extends G{constructor(t){super();H(this,t,_e,pe,O,{modId:6,versionId:7})}}export{Ne as default,Le as load};
//# sourceMappingURL=edit.svelte-a8e03733.js.map
